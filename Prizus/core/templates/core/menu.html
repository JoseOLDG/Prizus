{% load static %}
{% load crispy_forms_tags %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static 'core/css/style.css' %}" type="text/css" rel="stylesheet">
    <link href="{% static 'core/css/main.css' %}" type="text/css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:ital,wght@1,300&family=Ubuntu&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js"></script>
    <script src="https://kit.fontawesome.com/c8cde94915.js" crossorigin="anonymous"></script>

    

    <title>Inicio</title>
</head>

<body>
    <header>

        <nav class="navbar navbar-expand-lg navbar-light fixed-top" style="background-color: #666666;">
            <a href="{% url 'menu' %}" class="navbar-brand"><img src="{% static 'core/img/BRIZUS.png' %}" alt="logo img" class="logo"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        
            <div class="collapse navbar-collapse optnav" id="navbarSupportedContent">
                <form class="form-inline mx-auto">
                    <div class="busqueda">
                        <form method="get">
                            <div id="custom-search-input">
                                <div class="input-group col-md-12">
                                    <input type="search" area-label="Search" class="form-control me-2 tmbq" placeholder="Buscar" name="buscar" value="{{ request.GET.buscar}}">
                                    <span class="inputj-group-list">
                                        <i class="icon icon-search"></i>
                                        <button type="submit" class="btn1">Buscar</button>
                                    </span>
                                </div>
                            </div>
                        </form>
                    </div>
                </form>

                <ul class="navbar-nav ml-auto d-flex flex-row">
                    <li class="nav-item">
                        <a href="{% url 'login' %}" class="btn1 custom-margin">Ingresar</a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'registro' %}" class="btn1 custom-margin">Registro</a>
                    </li>
                </ul>
            </div>
        </nav>
        
    </header>

    <div class="contenerdorbody">

        <div class="acordeon">
            <div class="accordion" id="accordionExample">
                <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button custom-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                    Genero
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                    <strong></strong><code><select class="form-select" aria-label="Default select example">
                        <option selected>Seleccionar Genero</option>
                        <option value="1">Hombre</option> 
                        <option value="2">Mujer</option>
                        <option value="3">Unisex</option>
                      </select></code>
                    </div>
                </div>
                </div>
                <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed custom-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Contenido neto
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                    <strong></strong><code><select class="form-select" aria-label="Default select example">
                        <option selected>Contenido neto</option>
                        <option value="1">25 ml</option>
                        <option value="2">30 ml</option>
                        <option value="3">40 ml</option>
                        <option value="4">50 ml</option>
                        <option value="5">75 ml</option>
                        <option value="6">100 ml</option>
                        <option value="7">125 ml</option>
                      </select></code>

                    </div>
                </div>
                </div>
                <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed custom-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Marca
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                    <strong></strong><code><div class="form-check"> 
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Cartier                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            CHANEL                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Dior                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Giorgio Armani                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Jean Paul Gaultier                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Narciso Rodr√≠guez                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Ralph Lauren                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Tous                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Yves Saint Laurent                        </label>
                      </div></code>
                    </div>
                </div>
                </div>
            </div>

            

            <div id="range-slider"></div>

            <div>
                <a href="https://wa.me/56968592619?text=Hola, necesito ayuda."><i class="fa-brands fa-whatsapp iconw"></i></a>
            </div>
            
        </div> 
        <div class="sii">
            <div class="container-items">
                {% if productos %}
                {% for producto in productos %}
                <a href="{% url 'producto' producto.slug %}">
                    <div class="item">
                        <figure>
                            <img src="{{producto.imagen}}"
                                alt="producto" />
                        </figure>
                        <div class="info-product">
                            <h3>{{producto.nombre}}</h3>
                            <h3 class="descripcion">{{producto.descripcion}}</h3>
                        </div>
                    </div>
                </a>
                {% endfor %}
                {% else %}
                <p>No productos</p>
                {% endif %}

                
            </div>

            <div class="pagination">
                <!--<li class="page-item previous-page disable"><a class="page-link" href="#">Prev</a></li>
                <li class="page-item current-page active"><a class="page-link" href="#">1</a></li>
                <li class="page-item dots"><a class="page-link" href="#">...</a></li>
                <li class="page-item current-page"><a class="page-link" href="#">5</a></li>
                <li class="page-item current-page"><a class="page-link" href="#">6</a></li>
                <li class="page-item dots"><a class="page-link" href="#">...</a></li>
                <li class="page-item current-page"><a class="page-link" href="#">10</a></li>
                <li class="page-item next-page"><a class="page-link" href="#">Next</a></li>-->
            </div>
        </div>
        
    </div>

    
    
    <script type="text/javascript">
        function getPageList(totalPages, page, maxLength){
          function range(start, end){
            return Array.from(Array(end - start + 1), (_, i) => i + start);
          }
        
          var sideWidth = maxLength < 9 ? 1 : 2;
          var leftWidth = (maxLength - sideWidth * 2 - 3) >> 1;
          var rightWidth = (maxLength - sideWidth * 2 - 3) >> 1;
        
          if(totalPages <= maxLength){
            return range(1, totalPages);
          }
        
          if(page <= maxLength - sideWidth - 1 - rightWidth){
            return range(1, maxLength - sideWidth - 1).concat(0, range(totalPages - sideWidth + 1, totalPages));
          }
        
          if(page >= totalPages - sideWidth - 1 - rightWidth){
            return range(1, sideWidth).concat(0, range(totalPages- sideWidth - 1 - rightWidth - leftWidth, totalPages));
          }
        
          return range(1, sideWidth).concat(0, range(page - leftWidth, page + rightWidth), 0, range(totalPages - sideWidth + 1, totalPages));
        }
        
        $(function(){
          var numberOfItems = $(".container-items .item").length;
          var limitPerPage = 3; //How many card items visible per a page
          var totalPages = Math.ceil(numberOfItems / limitPerPage);
          var paginationSize = 7; //How many page elements visible in the pagination
          var currentPage;
        
          function showPage(whichPage){
            if(whichPage < 1 || whichPage > totalPages) return false;
        
            currentPage = whichPage;
        
            $(".container-items .item").hide().slice((currentPage - 1) * limitPerPage, currentPage * limitPerPage).show();
        
            $(".pagination li").slice(1, -1).remove();
        
            getPageList(totalPages, currentPage, paginationSize).forEach(item => {
              $("<li>").addClass("page-item").addClass(item ? "current-page" : "dots")
              .toggleClass("active", item === currentPage).append($("<a>").addClass("page-link")
              .attr({href: "javascript:void(0)"}).text(item || "...")).insertBefore(".next-page");
            });
        
            $(".previous-page").toggleClass("disable", currentPage === 1);
            $(".next-page").toggleClass("disable", currentPage === totalPages);
            return true;
          }
        
          $(".pagination").append(
            $("<li>").addClass("page-item").addClass("previous-page").append($("<a>").addClass("page-link").attr({href: "javascript:void(0)"}).text("Prev")),
            $("<li>").addClass("page-item").addClass("next-page").append($("<a>").addClass("page-link").attr({href: "javascript:void(0)"}).text("Next"))
          );
        
          $(".container-items").show();
          showPage(1);
        
          $(document).on("click", ".pagination li.current-page:not(.active)", function(){
            return showPage(+$(this).text());
          });
        
          $(".next-page").on("click", function(){
            return showPage(currentPage + 1);
          });
        
          $(".previous-page").on("click", function(){
            return showPage(currentPage - 1);
          });
        });
        </script>
<script src="{% static 'core/js/rangeslider.js' %}" type="text/javascript"></script>
<br>
</body>
</html>